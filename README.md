# Зачем и для кого
Для студентов и преподавателей при проверке 4 лабораторной работы.

## Фаззиг - что это?
Это когда набор данных для вашей программы генерируете не вы сами или преподаватели, а внешняя программка,
причем  соверашает несколько тысяч запусков в секунду с разными набороами данных.
Благодаря этому можно очень быстро и легко найти баг. 

## Подготовка
Делаем `make fuzz` и все выполнится само:

Сначала выполянются стадия `make debug` - файлы основной программы и библиотеки собираются с инструментацией 
(санитайзером ASAN - это как валгринд, только красивее и "роняет" вашу программу сразу при обнаружении ошибки).

Далее для фаззера создается две папки **in** и **out** 
В **out** будет хранится наборы данных, которые обработал фаззер.
Там же в папке **crashes** будут наборы данных, которые привели к падению. 
Их можно посмотреть через команду **cat**

Для фаззинга вам нужен фаззер. 
У него есть собтсвенный компилятор.
К этому моменту он должен быть установлен на сервере, поэтому программа скомпилируется с нужным компилятором (`afl-clang-fast`) сама.

Далее запускается фаззинг командай `afl-fuzz -i in/ -o out -- ./bin_asan `

Если все круто, то увидете окошко фаззера. 

Если будут краши - появятся красные цифры, как здесь.

![AFL crush!](/docks/afl.jpg "AFL")

В этом тестовом проекте будет найдено пару крашей.

## Свой запуск
В данном репозитории сделан тестовый проект. Скорее всего ваша лаба по структуре файлов похожа на этот проект.
Поэтому можете использовать make файл от данного проекта.
Собственно в папке **lib** должен лежать файлик с расширеним `.c` - это реализация ваших внешних функций библиотеки **string**
И файлик `main` в корне - там ваша основнная программа.

`make fuzz`

И все пойдет само.

## Если AFL++ не установлен
Идем по ссылке на гайд
https://github.com/AFLplusplus/AFLplusplus/blob/stable/docs/INSTALL.md

Если делаете на домашней системе, то выполняем весь скрипт.
Если на сервере - то сразу:
git clone https://github.com/AFLplusplus/AFLplusplus
```
cd AFLplusplus
make distrib
sudo make install
```
**После этого необходимо добавить переменную окружения, которая указывает путь до AFL**
Например
```
export AFL_PATH=~/AFLplusplus/
```
Далее 

`make fuzz`

И все пойдет само.
